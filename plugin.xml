<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.5"?>
<plugin>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            locationURI="popup:org.eclipse.php.ui.explorer">
         <command
               commandId="org.fred.plugin.php.test.runtests"
               label="Run PHPUnit"
               style="push">
			<visibleWhen>
				<with variable="activeMenuSelection">
					<iterate>
						<or>
							<adapt type="org.eclipse.dltk.core.ISourceModule"/>
							<adapt type="org.eclipse.dltk.core.IScriptFolder"/>
						</or>	
					</iterate>
				</with>
			</visibleWhen>
         </command>
      </menuContribution>
       <menuContribution locationURI="popup:org.eclipse.php.core.phpsource.source.EditorContext">
         <command
               commandId="org.fred.plugin.php.test.runtests"
               label="Run PHPUnit"
               style="push">
         </command>
      </menuContribution>
   </extension>
   <extension point="org.eclipse.ui.bindings">
   		<key sequence="M1+M2+D" 
   		commandId="org.fred.plugin.php.test.runtests"
   		schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
  		/>
	</extension>
   
   <extension point="org.eclipse.ui.commands">
      <command
            id="org.fred.plugin.php.test.runtests"
            name="Handler">
      </command>
   </extension>
   <extension point="org.eclipse.ui.handlers">
      <handler
            class="org.fred.plugin.php.test.handler.Handler"
            commandId="org.fred.plugin.php.test.runtests">
      </handler>
   </extension>
   <extension
         point="org.eclipse.ui.views">
      <view
            class="org.fred.plugin.php.test.views.ResultView"
            id="org.fred.plugin.php.test.views.ResultView"
            name="PHPUnit results">
      </view>
   </extension>
   <extension
         point="org.eclipse.ui.preferencePages">
      <page
            class="org.fred.plugin.php.test.views.PreferencePage"
            id="org.fred.plugin.php.test.views.PreferencePage"
            name="PHPUnit Preferences">
      </page>
   </extension>
   <extension point="org.eclipse.core.runtime.preferences"/>
   <extension point="org.eclipse.ui.propertyPages">
      <page
            class="org.fred.plugin.php.test.views.ProjectProperties"
            id="org.fred.plugin.php.test.views.ProjectProperties"
            name="PHPUnit properties"
            >
			<enabledWhen>
 				<instanceof value="org.eclipse.dltk.core.IScriptProject"/>
			</enabledWhen>
      </page>
   </extension>
</plugin>
